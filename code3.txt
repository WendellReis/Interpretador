ALLOC f 100 0

LABEL multiplica
MULT t1 a0 a1
RET t1

LABEL fib
BEQ a0 0 FIB_RET_1
BEQ a0 1 FIB_RET_1
J FIB_CHECK_MEMO

LABEL FIB_RET_1
RET 1

LABEL FIB_CHECK_MEMO
LD t_idx a0
LD t_val f$t_idx
BEQ t_val 0 FIB_CALC
RET t_val

LABEL FIB_CALC
SUB t1 a0 1
PARAM t1
CALL fib 1
LD r1 ra
SUB t2 a0 2
PARAM t2
CALL fib 1
LD r2 ra
ADD t3 r1 r2
LD t_idx a0
LD f$t_idx t3
RET t3

LABEL main
LD x 3.0
LD y 20.5
PARAM x
PARAM y
CALL multiplica 2
LD z ra
PRINT z
LD num 20
PARAM num
CALL fib 1
LD res ra
PRINT res
LD i 0
PRINT "Terminando Programa"

LABEL WHILE_START
BLE i 10 WHILE_BODY
J WHILE_END

LABEL WHILE_BODY
PRINT i
BEQ i 9 WHILE_END
ADD i i 1
J WHILE_START

LABEL WHILE_END
RET 0